{"version":3,"sources":["ucscmedbook:api/server/genelist/genelist.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,mC;AACA,c;;AAEA,0B;AACA,4C;AACA,uB;AACA,qB;AACA,+G;AACA,iC;AACA,wC;AACA,2D;AACA,qC;AACA,iB;AACA,e;AACA,gC;AACA,sD;AACA,+B;AACA,uB;AACA,W;AACA,M;;AAEA,0B;AACA,4C;;AAEA,uB;AACA,gC;AACA,sC;AACA,qC;AACA,wB;AACA,8B;;AAEA,6F;AACA,iC;AACA,4D;AACA,e;AACA,sD;;AAEA,+B;AACA,uB;AACA,W;AACA,M;AACA,G;AACA,kC","file":"/packages/ucscmedbook_api.js","sourcesContent":["console.log(\"Before HTTP Methods\");\nHTTP.methods({\n\n    genes: function(data){\n        console.log(\"IN HTTP Method genes\");\n        var items = [];\n        var seen = {}\n        Expression.find( {gene: {$regex: \"^\"+ this.query.q + \".*\" }}, { sort: {gene:1 }, fields: {\"gene\":1 }}).\n            forEach(function(f) {\n                if (!(f.gene in seen)) {\n                    items.push({id: f.gene, text: f.gene});\n                    seen[f.gene] = 1;\n                }\n            });\n        items = _.unique(items);\n        this.setContentType(\"application/javascript\");\n        return JSON.stringify({\n            items:items\n        });\n    },\n\n    quick: function(data){\n        console.log(\"IN HTTP Method quick\");\n\n        var items = [];\n        var term = this.query.q;\n        var collection = this.query.c;\n        var fieldName = this.query.f;\n        var fields = {};\n        fields[fieldName] = 1;\n\n        GeneSets.find( {name: {$regex: \"^\"+ term + \".*\" }}, { sort: fields, fields: fields}).\n            forEach(function(f) {\n                items.push({id: f._id, text: f[fieldName]});\n            });\n        this.setContentType(\"application/javascript\");\n\n        return JSON.stringify({\n            items:items\n        });\n    },\n});\nconsole.log(\"After HTTP Methods\");\n"]}